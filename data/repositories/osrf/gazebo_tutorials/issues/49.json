{"priority": "trivial", "kind": "bug", "repository": {"links": {"self": {"href": "data/repositories/osrf/gazebo_tutorials.json"}, "html": {"href": "#!/osrf/gazebo_tutorials"}, "avatar": {"href": "data/bytebucket.org/ravatar/{9adb672c-d31a-4c2b-bae4-8d5870291649}ts=1736722"}}, "type": "repository", "name": "gazebo_tutorials", "full_name": "osrf/gazebo_tutorials", "uuid": "{9adb672c-d31a-4c2b-bae4-8d5870291649}"}, "links": {"attachments": {"href": "data/repositories/osrf/gazebo_tutorials/issues/49/attachments_page=1.json"}, "self": {"href": "data/repositories/osrf/gazebo_tutorials/issues/49.json"}, "watch": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo_tutorials/issues/49/watch"}, "comments": {"href": "data/repositories/osrf/gazebo_tutorials/issues/49/comments_page=1.json"}, "html": {"href": "#!/osrf/gazebo_tutorials/issues/49/inertia-tutorialmd-possible-wrong-matrix"}, "vote": {"href": "https://api.bitbucket.org/2.0/repositories/osrf/gazebo_tutorials/issues/49/vote"}}, "reporter": {"display_name": "Alessandro Tondo", "uuid": "{e784db86-294e-4d04-9625-965cd9f37dbb}", "links": {"self": {"href": "https://api.bitbucket.org/2.0/users/%7Be784db86-294e-4d04-9625-965cd9f37dbb%7D"}, "html": {"href": "https://bitbucket.org/%7Be784db86-294e-4d04-9625-965cd9f37dbb%7D/"}, "avatar": {"href": "https://avatar-management--avatars.us-west-2.prod.public.atl-paas.net/557058:b35dbee2-c8ba-4f9f-b5bd-5e4843679c8a/23129b89-cd7e-4b5c-af4b-4d251e300dcf/128"}}, "nickname": "alextoind", "type": "user", "account_id": "557058:b35dbee2-c8ba-4f9f-b5bd-5e4843679c8a"}, "title": "[inertia/tutorial.md] possible wrong matrix correction in \"Getting the Inertia Tensor\" section", "component": null, "votes": 0, "watches": 3, "content": {"raw": "I've done few experiments on getting the inertia tensor of some .dae meshes following the [inertia/tutorial.md](#!/osrf/gazebo_tutorials/annotate/8c14071cb36f3119b9dbe5dfd67480fcee2c7fd4/inertia/tutorial.md?at=default&fileviewer=file-view-default#tutorial.md-52) and I found out something strange.\r\n\r\nIt is said that scaling by a factor `S` (e.g 10 per axis with the default uniform scaling flag enabled, thus a factor of 1000 on the mesh volume), the scaled inertia matrix `Iscaled` is such that `Iscaled = S^2 * I`. However, it appears to be `Iscaled = S^5 * I`, where in the above example `S = 10` (not 1000). I don't know if it is physically correct, but I've tested with several values of S and it has a linear dependancy with the parameter `S^5`.\r\n\r\nIt could be possible that the value in the tutorial represents the volume scaling (e.g. 1000) and that its square has been confused with the previous `S^5` (actually in many cases the result is very similar: just one order wrong in the above example, but it could be greater depending on the scale factor).\r\n\r\nLast but not least I think that, [in the following](#!/osrf/gazebo_tutorials/annotate/8c14071cb36f3119b9dbe5dfd67480fcee2c7fd4/inertia/tutorial.md?fileviewer=file-view-default#tutorial.md-56), `s` is not the reciprocal but exactly the scaling factor.\r\n> The only thing that remains is to copy the inertia tensor into a mathematical software and multiply it by `1/s^2` where `s` is the reciprocal of the scale used for upscaling the model.\r\n\r\nAm I wrong?\r\n\r\nHere are some tests:\r\n\r\n\r\n```\r\nScale 1:\r\nVol: 0.000152\r\nInertia Tensor is :\r\n| 0.000000 0.000000 -0.000000 |\r\n| 0.000000 0.000000 -0.000000 |\r\n| -0.000000 -0.000000 0.000000 |\r\n\r\nScale: 10 (each direction)\r\nVol: 0.151635\r\nInertia Tensor is :\r\n| 0.012751 0.000255 -0.000250 |\r\n| 0.000255 0.017781 -0.000309 |\r\n| -0.000250 -0.000309 0.010201 |\r\n\r\nscale: 100 (each direction)\r\nVol: 151.634659\r\nInertia Tensor is :\r\n| 1275.088989 25.531651 -24.984613 |\r\n| 25.531651 1778.113037 -30.901112 |\r\n| -24.984613 -30.901112 1020.051270 |\r\n\r\nscale: 1000 (each direction)\r\nVol: 151634.656250\r\nInertia Tensor is :\r\n| 127508912.000000 2553160.000000 -2498458.500000 |\r\n| 2553160.000000 177811296.000000 -3090116.500000 |\r\n| -2498458.500000 -3090116.500000 102005104.000000 |\r\n\r\nScale: 18.7378 (each direction)\r\nVol: 0.997595\r\nInertia Tensor is :\r\n| 0.294533 0.005898 -0.005771 |\r\n| 0.005898 0.410726 -0.007138 |\r\n| -0.005771 -0.007138 0.235622 |\r\n```", "markup": "markdown", "html": "<p>I've done few experiments on getting the inertia tensor of some .dae meshes following the <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo_tutorials/annotate/8c14071cb36f3119b9dbe5dfd67480fcee2c7fd4/inertia/tutorial.md?at=default&amp;fileviewer=file-view-default#tutorial.md-52\" rel=\"nofollow\">inertia/tutorial.md</a> and I found out something strange.</p>\n<p>It is said that scaling by a factor <code>S</code> (e.g 10 per axis with the default uniform scaling flag enabled, thus a factor of 1000 on the mesh volume), the scaled inertia matrix <code>Iscaled</code> is such that <code>Iscaled = S^2 * I</code>. However, it appears to be <code>Iscaled = S^5 * I</code>, where in the above example <code>S = 10</code> (not 1000). I don't know if it is physically correct, but I've tested with several values of S and it has a linear dependancy with the parameter <code>S^5</code>.</p>\n<p>It could be possible that the value in the tutorial represents the volume scaling (e.g. 1000) and that its square has been confused with the previous <code>S^5</code> (actually in many cases the result is very similar: just one order wrong in the above example, but it could be greater depending on the scale factor).</p>\n<p>Last but not least I think that, <a data-is-external-link=\"true\" href=\"#!/osrf/gazebo_tutorials/annotate/8c14071cb36f3119b9dbe5dfd67480fcee2c7fd4/inertia/tutorial.md?fileviewer=file-view-default#tutorial.md-56\" rel=\"nofollow\">in the following</a>, <code>s</code> is not the reciprocal but exactly the scaling factor.</p>\n<blockquote>\n<p>The only thing that remains is to copy the inertia tensor into a mathematical software and multiply it by <code>1/s^2</code> where <code>s</code> is the reciprocal of the scale used for upscaling the model.</p>\n</blockquote>\n<p>Am I wrong?</p>\n<p>Here are some tests:</p>\n<div class=\"codehilite\"><pre><span></span>Scale 1:\nVol: 0.000152\nInertia Tensor is :\n| 0.000000 0.000000 -0.000000 |\n| 0.000000 0.000000 -0.000000 |\n| -0.000000 -0.000000 0.000000 |\n\nScale: 10 (each direction)\nVol: 0.151635\nInertia Tensor is :\n| 0.012751 0.000255 -0.000250 |\n| 0.000255 0.017781 -0.000309 |\n| -0.000250 -0.000309 0.010201 |\n\nscale: 100 (each direction)\nVol: 151.634659\nInertia Tensor is :\n| 1275.088989 25.531651 -24.984613 |\n| 25.531651 1778.113037 -30.901112 |\n| -24.984613 -30.901112 1020.051270 |\n\nscale: 1000 (each direction)\nVol: 151634.656250\nInertia Tensor is :\n| 127508912.000000 2553160.000000 -2498458.500000 |\n| 2553160.000000 177811296.000000 -3090116.500000 |\n| -2498458.500000 -3090116.500000 102005104.000000 |\n\nScale: 18.7378 (each direction)\nVol: 0.997595\nInertia Tensor is :\n| 0.294533 0.005898 -0.005771 |\n| 0.005898 0.410726 -0.007138 |\n| -0.005771 -0.007138 0.235622 |\n</pre></div>", "type": "rendered"}, "assignee": null, "state": "new", "version": null, "edited_on": null, "created_on": "2016-01-20T16:35:22.837105+00:00", "milestone": null, "updated_on": "2016-01-25T22:26:18.717703+00:00", "type": "issue", "id": 49}